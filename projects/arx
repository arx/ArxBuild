#!/bin/bash

# What is the project called
project_name='Arx'

project_buildlogs_url='http://arx-libertatis.org/buildlogs/arx/'

# Some additional arx-specific build options
cmake_options[minimal]='-DBUILD_EDIT_LOADSAVE=0'
cmake_options[unity]='-DUNITY_BUILD=1'
cmake_options[xtra]='-DDEBUG_EXTRA=1'
cmake_options[boostfs]='-DUSE_NATIVE_FS=0'

# The environments for these don't have Qt installed - disable the crash reporter & profiler
cmake_options[gcc-freebsd-9.1-i686]+=" -DBUILD_CRASHREPORTER=0 -DBUILD_PROFILER=0"
cmake_options[gcc-armv6j-hf]+=" -DBUILD_CRASHREPORTER=0 -DBUILD_PROFILER=0"
cmake_options[gcc-bindist-x86-64]+=" -DBUILD_CRASHREPORTER=0 -DBUILD_PROFILER=0"
cmake_options[mingw]+=" -DBUILD_PROFILER=0"

arx_use_qt4="-DUSE_QT5=0 -DWITH_QT=4"
arx_use_qt5="-DUSE_QT4=0 -DWITH_QT=5"
cmake_options[olddeps]+=" $arx_use_qt4 -DWITH_SDL=1"
cmake_options[m32]+=" $arx_use_qt4"
cmake_options[msvc-9.0-32]+=" $arx_use_qt4"
cmake_options[msvc-9.0-64]+=" $arx_use_qt4"
cmake_options[msvc-10.0-32]+=" $arx_use_qt5"
cmake_options[msvc-11.0-32]+=" $arx_use_qt5"
cmake_options[msvc-11.0-64]+=" $arx_use_qt5"
cmake_options[msvc-12.0-32]+=" $arx_use_qt5"
cmake_options[msvc-12.0-64]+=" $arx_use_qt5"

# Compiler for builds that test library/config compatability
default_compiler='gcc-4.9'

# Declare directories containing source code (for cppcheck and flawfinder)
source_directories+=(
	"$repo/tools"
)
include_directories+=(
	-I "$repo/tools"
)

# TODO temp workaround for clang + libc++ + unity build = OOM/crash
compiler_options[libcxx]+=" -fPIE"

merge_config olddeps cmake-2.8.3
merge_config olddeps curl-7.20.0
merge_config olddeps boost-1.48
merge_config olddeps sdl-1.2.10
merge_config olddeps openal-soft-1.0.38
merge_config olddeps glew-1.5.2
merge_config olddeps freetype-2.3.0
merge_config olddeps glm-0.9.5.0

# Finally, define the used build types.
# Each build type is an underscore-seperated list of tokens defined in
# cmake_options, compiler_options and make_options.
build_types=(
	
	# Static analyzers and style checks
	
	'clang-analyzer'
	'clang-analyzer_unity'
	
	'cppcheck'
	
	'flawfinder'
	
	'shellcheck'
	
	# Test different compilers/stdlibs and versions
	
	'clang-3.3_libcxx_debug'
	'clang-3.3_libcxx_unity'
	
	'clang-3.4_libcxx_debug'
	'clang-3.4_libcxx_unity'
	
	'clang-3.5_libcxx_debug'
	'clang-3.5_libcxx_unity'
	
	'clang-3.6_libcxx_debug'
	'clang-3.6_libcxx_unity'
	
	'clang-3.7_libcxx_debug'
	'clang-3.7_libcxx_unity'
	
	'clang-dev_libcxx_debug'
	'clang-dev_libcxx_unity'
	
	'clang-dev_libcxx_m32_debug'
	
	'clang-dev_libstdcxx_debug'
	'clang-dev_libstdcxx_unity'
	
	'ekopath_debug'
	'ekopath_unity'
	
	'icc_debug'
	'icc_unity'
	
	'gcc-4.3_debug'
	'gcc-4.3_unity'
	
	'gcc-4.4_debug'
	'gcc-4.4_unity'
	
	'gcc-4.5_debug'
	'gcc-4.5_unity'
	
	'gcc-4.6_debug'
	'gcc-4.6_unity'
	
	'gcc-4.7_debug'
	'gcc-4.7_unity'
	
	'gcc-4.8_debug'
	'gcc-4.8_unity'
	
	'gcc-4.9_debug'
	'gcc-4.9_unity'
	
	'gcc-5_debug'
	'gcc-5_unity'
	
	'gcc-6_debug'
	'gcc-6_unity'
	
	'mingw_debug'
	'mingw_unity_lto'
	
	'msvc-10.0-32_unity'
	'msvc-11.0-32_unity'
	'msvc-12.0-32_debug'
	'msvc-12.0-64_unity'
	
	# Test different build types
	
	$default_compiler'_glm-git'
	$default_compiler'_glm-git_unity_debug'
	$default_compiler'_unity_xtra'
	
	# Test different architectures
	
	$default_compiler'_m32_debug'
	$default_compiler'_m32'
	
	$default_compiler'_debug_minimal'
	$default_compiler'_unity_minimal_static'
	
	'gcc-freebsd-9.1-i686_debug'
	'gcc-freebsd-9.1-i686_unity_lto'
	
	'gcc-armv6j-hf_unity_lto'
	
	'gcc-bindist-x86-64_unity_lto'
	
	# Test different library versions
	
	$default_compiler'_debug_boost-1.48_boostfs'
	$default_compiler'_debug_boost-1.49_boostfs'
	$default_compiler'_debug_boost-1.50_boostfs'
	$default_compiler'_debug_boost-1.51_boostfs'
	$default_compiler'_debug_boost-1.52_boostfs'
	$default_compiler'_debug_boost-1.53_boostfs'
	$default_compiler'_debug_boost-1.54_boostfs'
	$default_compiler'_debug_boost-1.55_boostfs'
	$default_compiler'_debug_boost-1.56_boostfs'
	$default_compiler'_debug_boost-1.57_boostfs'
	$default_compiler'_debug_boost-1.58_boostfs'
	$default_compiler'_debug_boost-1.59_boostfs'
	
	$default_compiler'_olddeps_unity'
	$default_compiler'_olddeps_debug'
	
	# TODO 'include-what-you-use'
	
	'style'
	'winstyle'
	
)

favicons['/favicon.ico']=''
favicons['/images/arx-libertatis.png']='128x128'
favicons['/favicon.png']='16x16'

covertiy_scan_project='1656'
travis_ci_project='arx/ArxLibertatis'

commit_url=https://github.com/arx/ArxLibertatis/commits/
